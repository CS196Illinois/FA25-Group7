<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EventFlow</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <!-- Google API Libraries -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="https://apis.google.com/js/api.js" async defer></script>
</head>
<body>
  <div class="split-container">
    <!-- LEFT SIDE: Upcoming Events -->
    <div class="left-panel">
      <div class="panel-header">
        <h2>Upcoming Events</h2>
      </div>

      <!-- Month/Year Selector -->
      <div class="month-selector">
        <button id="prev-month" class="month-nav-btn" style="visibility: hidden;">â†</button>
        <div class="month-display">
          <span id="current-month-year"></span>
        </div>
        <button id="next-month" class="month-nav-btn">â†’</button>
      </div>

      <!-- Upcoming Events List -->
      <div id="upcoming-events-list" class="upcoming-events-scroll">
        <p class="no-events-text">No upcoming events this month</p>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button id="connect-calendar-btn" class="action-btn">
          ğŸ”— Connect Calendar
        </button>
        <button id="add-email-btn" class="action-btn">
          ğŸ“§ Add from Email
        </button>
        <button id="add-event-btn" class="action-btn">
          â• Manual Event
        </button>
      </div>

      <!-- Connection Status (Hidden by default) -->
      <div id="connection-status" class="connection-status" style="display: none;">
        <span>âœ… Connected to <span id="user-email"></span>'s Google Calendar!</span>
        <button id="disconnect-btn" class="disconnect-btn-small">Disconnect</button>
      </div>
    </div>

    <!-- RIGHT SIDE: Browse Events -->
    <div class="right-panel">
      <div class="panel-header">
        <h2>Browse All Events</h2>
        <div class="search-filter-compact">
          <input type="text" id="search-events" placeholder="Search..." />
          <select id="filter-category">
            <option value="all">All Categories</option>
          </select>
        </div>
      </div>

      <div id="browse-events" class="browse-container-compact">
        <!-- Events will be dynamically loaded here -->
      </div>
    </div>
  </div>

  <!-- Event Detail Modal -->
  <div id="detail-modal" class="modal">
    <div class="modal-content detail-modal-content">
      <span class="close-modal" id="close-detail">&times;</span>
      <h2 id="detail-title"></h2>
      <div class="detail-info">
        <div class="detail-row">
          <span class="detail-label">ğŸ“… Date:</span>
          <span id="detail-date"></span>
        </div>
        <div class="detail-row">
          <span class="detail-label">ğŸ• Time:</span>
          <span id="detail-time"></span>
        </div>
        <div class="detail-row">
          <span class="detail-label">ğŸ“ Location:</span>
          <span id="detail-location"></span>
        </div>
        <div class="detail-row">
          <span class="detail-label">ğŸ¢ Host:</span>
          <span id="detail-host"></span>
        </div>
        <div class="detail-row">
          <span class="detail-label">ğŸ·ï¸ Category:</span>
          <span id="detail-tag" class="event-tag"></span>
        </div>
        <div class="detail-row description">
          <span class="detail-label">ğŸ“ Description:</span>
          <p id="detail-description"></p>
        </div>
        <a id="detail-link" href="#" target="_blank" class="event-link">View Event Page â†’</a>
      </div>
    </div>
  </div>

  <!-- Add Event Modal -->
  <div id="event-modal" class="modal">
    <div class="modal-content">
      <h3>Add New Event</h3>
      <input type="text" id="event-title" placeholder="Event Title" />
      <input type="datetime-local" id="event-date" />
      <input type="text" id="event-location" placeholder="Location" />
      <button id="save-event">Save</button>
      <button id="close-modal">Cancel</button>
    </div>
  </div>

  <script src="{{ url_for('static', filename='calendar-client.js') }}" type="module"></script>
  <script src="{{ url_for('static', filename='script.js') }}" type="module"></script>
</body>
</html>
